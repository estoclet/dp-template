var AccessConfig=function(P){var v={Setup:{id:"accessconfig"},Setting:{useExtendContrast:!0},BodyActive:{classSetting:"active"},Overlay:{classSetting:"overlay"},ModalButton:{id:"button"},ModalContainer:{classSetting:"modal",titleLang:{en:"Accessibility settings",fr:"Paramètres d’accessibilité"},subTitle:{lang:{en:"Configure accessibility settings",fr:"Configurer vos choix d’accessibilité"},class:"chapo",id:"subtitle"},titleId:"title",titleClass:"title"},CloseButton:{id:"close",classSetting:"close",lang:{en:"close",fr:"fermer"},hiddenTextClass:"sr-only"},InlineContentContainer:{id:"inline-c"},FormFieldsetContent:{classSetting:"content"},FormFieldset:{classSetting:"fieldset"},LegendFieldset:{classSetting:"legend"},FormRadio:{classSetting:"radio"},ContrastFieldset:{id:"contrast"},ContrastLegend:{lang:{en:"Contrast",fr:"Contrastes"}},DefaultContrastCheckbox:{id:"default-contrast",value:"default-contrast",groupName:"contrast",lang:{en:"Default",fr:"Défaut"}},HighContrastCheckbox:{id:"high-contrast",value:"high-contrast",groupName:"contrast",lang:{en:"Reinforce",fr:"Renforcer"}},InvertContrastCheckbox:{id:"inv-contrast",value:"inv-contrast",groupName:"contrast",lang:{en:"Reverse",fr:"Inverser"}},DyslexiaFieldset:{id:"font"},DyslexiaLegend:{lang:{en:"Font (dyslexia)",fr:"Police (dyslexie)"}},DefaultFontCheckbox:{id:"default-font",value:"default-font",groupName:"font",lang:{en:"Default",fr:"Défaut"}},DyslexiaFontCheckbox:{id:"dys-font",value:"dys-font",groupName:"font",lang:{en:"Adapt",fr:"Adapter"}},LineSpacingFieldset:{id:"line-spacing"},LineSpacingLegend:{lang:{en:"Line spacing",fr:"Interlignage"}},DefaultLineSpacingCheckbox:{id:"default-spacing",value:"default-spacing",groupName:"line-spacing",lang:{en:"Default",fr:"Défaut"}},DyslexiaLineSpacingCheckbox:{id:"dys-spacing",value:"dys-spacing",groupName:"line-spacing",lang:{en:"Increase",fr:"Augmenter"}},JustificationFieldset:{id:"justification"},JustificationLegend:{lang:{en:"Justification",fr:"Justification"}},DefaultJustificationCheckbox:{id:"default-justification",value:"default-justification",groupName:"justification",lang:{en:"Default",fr:"Défaut"}},DyslexiaJustificationCheckbox:{id:"cancel-justification",value:"cancel-justification",groupName:"justification",lang:{en:"Remove",fr:"Supprimer"}},ImageReplacementFieldset:{id:"image"},ImageReplacementCSS:{replacementCss:"replace-img",replacementStyle:"replace-style"},ImageReplacementLegend:{lang:{en:"Images",fr:"Images"}},DefaultImageReplacementCheckbox:{id:"default-img",value:"default-img",groupName:"image",lang:{en:"Default",fr:"Défaut"}},ImageReplacementCheckbox:{id:"text-img",value:"text-img",groupName:"image",lang:{en:"Replace with text",fr:"Remplacer par du texte"}},ReinitFieldset:{id:"reinit"},ReinitButton:{id:"btn-reinit",lang:{en:"Reset",fr:"Réinitialiser"}}},k={mode:null,cookieName:null,openObj:null,imgTab:null,imgSpan:null};function r(){var e=document.querySelector("body"),t=document.getElementById(k.mode).querySelectorAll("input");for(i=0,len=t.length;i<len;i++)t[i].addEventListener("click",function(){n(this)},!1);var a=function(e){for(var t=userPrefix+"-"+e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}(k.cookieName);if(a){for(e.classList.add(a),i=0,len=t.length;i<len;i++)t[i].removeAttribute("checked");document.getElementById(a).setAttribute("checked","checked")}e.classList.contains(userPrefix+"-"+v.DefaultImageReplacementCheckbox.value)&&s(),e.classList.contains(userPrefix+"-"+v.ImageReplacementCheckbox.value)&&l()}function n(e){k.mode=e.getAttribute("name"),k.cookieName=e.getAttribute("name");var t=document.getElementById(k.mode).querySelectorAll("input"),a=document.querySelector("body");for(i=0,lenx=t.length;i<lenx;i++){var n=t[i].getAttribute("value");t[i].removeAttribute("checked"),n===userPrefix+"-"+v.DefaultImageReplacementCheckbox.value&&s(),a.classList.remove(n)}var r=e.getAttribute("value");e.setAttribute("checked","checked"),(n=e.getAttribute("value"))===userPrefix+"-"+v.ImageReplacementCheckbox.value&&l(),a.classList.add(r),d(k.cookieName,r,"180")}function l(){for(j=0,len=k.imgTab.length;j<len;j++)if(k.imgTab[j].parentNode){var e=k.imgTab[j].parentNode;k.imgTab[j]=e.replaceChild(k.imgSpan[j],k.imgTab[j])}}function s(){for(j=0,len=k.imgSpan.length;j<len;j++)if(k.imgSpan[j].parentNode){var e=k.imgSpan[j].parentNode;k.imgSpan[j]=e.replaceChild(k.imgTab[j],k.imgSpan[j])}}function o(i){document.body.classList.add(userPrefix+"-"+v.BodyActive.classSetting);var e=document.createElement("div");e.classList.add(userPrefix+"-"+v.Overlay.classSetting),document.body.appendChild(e),k.openObj=document.getElementById(userPrefix),k.openObj.style.display="block",document.getElementById(userPrefix+"-"+v.CloseButton.id).focus(),document.addEventListener("keydown",function e(t){if(27===t.keyCode){k.openObj.style.display="none",i.focus(),document.removeEventListener("keydown",e,!1),document.body.classList.remove(userPrefix+"-"+v.BodyActive.classSetting);var a=document.querySelector("."+userPrefix+"-"+v.Overlay.classSetting);a&&a.remove()}},!1);var a=document.getElementById(userPrefix+"-"+v.CloseButton.id);a.addEventListener("click",function e(){k.openObj.style.display="none";i.focus();a.removeEventListener("click",e,!1);document.body.classList.remove(userPrefix+"-"+v.BodyActive.classSetting);var t=document.querySelector("."+userPrefix+"-"+v.Overlay.classSetting);t&&t.remove()},!1),document.addEventListener("focus",t,!0)}function t(e){k.openObj&&!k.openObj.contains(e.target)&&(e.stopPropagation(),k.openObj.focus())}function d(e,t,a){if(a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var n="; expires="+i.toGMTString()}else n="";document.cookie=e+"="+t+n+"; path=/"}window.onload=function(){if(document.querySelector("[data-accessconfig-params]")){var e=document.querySelector("[data-accessconfig-params]");if(k.userParams=JSON.parse(e.getAttribute("data-accessconfig-params")),userPrefix=k.userParams.Prefix?k.userParams.Prefix:"a42-ac",function(){function e(e){var t=e.tagName,a=document.createElement(t);for(var i in e)"tagName"!=i&&"function"!=typeof e[i]&&a.setAttribute(i,e[i]);return a}var t=function(){var e=document.querySelector("html").getAttribute("lang");{var t;return e?(t=0<e.indexOf("-")?e.indexOf("-"):3,e.substring(0,t)):"en"}}(),a=e({tagName:"div",id:userPrefix,class:userPrefix}),n=e({tagName:"div",class:userPrefix+"-"+v.FormFieldsetContent.classSetting});if(1==k.userParams.Modal||void 0===k.userParams.Modal){a.setAttribute("role","dialog"),a.setAttribute("aria-labelledby",userPrefix+"-"+v.ModalContainer.titleId),a.setAttribute("tabindex","-1"),k.userParams.ContainerClass?a.classList.add(userPrefix+"-"+k.userParams.ContainerClass):a.classList.add(userPrefix+"-"+v.ModalContainer.classSetting);var r=e({tagName:"h1",id:userPrefix+"-"+v.ModalContainer.titleId});k.userParams.ModalTitle?r.classList.add(userPrefix+k.userParams.ModalTitle):r.classList.add(userPrefix+"-"+v.ModalContainer.titleClass);var l=document.createTextNode(v.ModalContainer.titleLang[t]);r.appendChild(l);var s=e({tagName:"div",id:userPrefix+"-"+v.ModalContainer.subTitle.id,class:v.ModalContainer.subTitle.class});s.textContent=v.ModalContainer.subTitle.lang[t],r.appendChild(s),a.appendChild(r);var o=e({tagName:"button",type:"button",id:userPrefix+"-"+v.CloseButton.id});k.userParams.ModalCloseButton?o.classList.add(userPrefix+k.userParams.ModalCloseButton):o.classList.add(userPrefix+"-"+v.CloseButton.classSetting);var d=e({tagName:"span",class:v.CloseButton.hiddenTextClass}),c=document.createTextNode(v.CloseButton.lang[t]);d.appendChild(c),o.appendChild(d),a.appendChild(o),a.appendChild(n)}else{document.getElementById(v.Setup.id).appendChild(a),a.classList.add(userPrefix+"accessconfig-inline"),a.appendChild(n)}if(0!=k.userParams.Contrast){var u=e({tagName:"fieldset",id:userPrefix+"-"+v.ContrastFieldset.id}),m=document.createElement("legend"),f=document.createTextNode(v.ContrastLegend.lang[t]);m.appendChild(f),u.appendChild(m);var g=e({tagName:"input",type:"radio",checked:"checked",id:userPrefix+"-"+v.DefaultContrastCheckbox.id,value:userPrefix+"-"+v.DefaultContrastCheckbox.value,name:userPrefix+"-"+v.DefaultContrastCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DefaultContrastCheckbox.id}),x=document.createTextNode(v.DefaultContrastCheckbox.lang[t]);if(p.appendChild(x),u.appendChild(g),u.appendChild(p),v.Setting.useExtendContrast){g=e({tagName:"input",type:"radio",id:userPrefix+"-"+v.HighContrastCheckbox.id,value:userPrefix+"-"+v.HighContrastCheckbox.value,name:userPrefix+"-"+v.HighContrastCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.HighContrastCheckbox.id}),x=document.createTextNode(v.HighContrastCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p)}g=e({tagName:"input",type:"radio",id:userPrefix+"-"+v.InvertContrastCheckbox.id,value:userPrefix+"-"+v.InvertContrastCheckbox.value,name:userPrefix+"-"+v.InvertContrastCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.InvertContrastCheckbox.id}),x=document.createTextNode(v.InvertContrastCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p),n.appendChild(u)}if(0!=k.userParams.Font){u=e({tagName:"fieldset",id:userPrefix+"-"+v.DyslexiaFieldset.id}),m=document.createElement("legend"),f=document.createTextNode(v.DyslexiaLegend.lang[t]);m.appendChild(f),u.appendChild(m);g=e({tagName:"input",type:"radio",checked:"checked",id:userPrefix+"-"+v.DefaultFontCheckbox.id,value:userPrefix+"-"+v.DefaultFontCheckbox.value,name:userPrefix+"-"+v.DefaultFontCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DefaultFontCheckbox.id}),x=document.createTextNode(v.DefaultFontCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p);g=e({tagName:"input",type:"radio",id:userPrefix+"-"+v.DyslexiaFontCheckbox.id,value:userPrefix+"-"+v.DyslexiaFontCheckbox.value,name:userPrefix+"-"+v.DyslexiaFontCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DyslexiaFontCheckbox.id}),x=document.createTextNode(v.DyslexiaFontCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p),n.appendChild(u)}if(0!=k.userParams.LineSpacing){u=e({tagName:"fieldset",id:userPrefix+"-"+v.LineSpacingFieldset.id}),m=document.createElement("legend"),f=document.createTextNode(v.LineSpacingLegend.lang[t]);m.appendChild(f),u.appendChild(m);g=e({tagName:"input",type:"radio",checked:"checked",id:userPrefix+"-"+v.DefaultLineSpacingCheckbox.id,value:userPrefix+"-"+v.DefaultLineSpacingCheckbox.value,name:userPrefix+"-"+v.DefaultLineSpacingCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DefaultLineSpacingCheckbox.id}),x=document.createTextNode(v.DefaultLineSpacingCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p);g=e({tagName:"input",type:"radio",id:userPrefix+"-"+v.DyslexiaLineSpacingCheckbox.id,value:userPrefix+"-"+v.DyslexiaLineSpacingCheckbox.value,name:userPrefix+"-"+v.DyslexiaLineSpacingCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DyslexiaLineSpacingCheckbox.id}),x=document.createTextNode(v.DyslexiaLineSpacingCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p),n.appendChild(u)}if(0!=k.userParams.Justification){u=e({tagName:"fieldset",id:userPrefix+"-"+v.JustificationFieldset.id}),m=document.createElement("legend"),f=document.createTextNode(v.JustificationLegend.lang[t]);m.appendChild(f),u.appendChild(m);g=e({tagName:"input",type:"radio",checked:"checked",id:userPrefix+"-"+v.DefaultJustificationCheckbox.id,value:userPrefix+"-"+v.DefaultJustificationCheckbox.value,name:userPrefix+"-"+v.DefaultJustificationCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DefaultJustificationCheckbox.id}),x=document.createTextNode(v.DefaultJustificationCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p);g=e({tagName:"input",type:"radio",id:userPrefix+"-"+v.DyslexiaJustificationCheckbox.id,value:userPrefix+"-"+v.DyslexiaJustificationCheckbox.value,name:userPrefix+"-"+v.DyslexiaJustificationCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DyslexiaJustificationCheckbox.id}),x=document.createTextNode(v.DyslexiaJustificationCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p),n.appendChild(u)}if(0!=k.userParams.ImageReplacement){u=e({tagName:"fieldset",id:userPrefix+"-"+v.ImageReplacementFieldset.id}),m=document.createElement("legend"),f=document.createTextNode(v.ImageReplacementLegend.lang[t]);m.appendChild(f),u.appendChild(m);g=e({tagName:"input",type:"radio",checked:"checked",id:userPrefix+"-"+v.DefaultImageReplacementCheckbox.id,value:userPrefix+"-"+v.DefaultImageReplacementCheckbox.value,name:userPrefix+"-"+v.DefaultImageReplacementCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.DefaultImageReplacementCheckbox.id}),x=document.createTextNode(v.DefaultImageReplacementCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p);g=e({tagName:"input",type:"radio",id:userPrefix+"-"+v.ImageReplacementCheckbox.id,value:userPrefix+"-"+v.ImageReplacementCheckbox.value,name:userPrefix+"-"+v.ImageReplacementCheckbox.groupName}),p=e({tagName:"label",for:userPrefix+"-"+v.ImageReplacementCheckbox.id}),x=document.createTextNode(v.ImageReplacementCheckbox.lang[t]);p.appendChild(x),u.appendChild(g),u.appendChild(p),n.appendChild(u)}if(0!=k.userParams.Reinit){u=e({tagName:"fieldset",id:userPrefix+"-"+v.ReinitFieldset.id});var C=e({tagName:"button",id:v.ReinitButton.id,class:v.ReinitButton.class});C.textContent=v.ReinitButton.lang[t],C.addEventListener("click",function(e){P(".a42-ac-content").find(".a42-ac-fieldset:not(:last-child)").each(function(e,t){P(t).find("input").first().trigger("click")})}),u.appendChild(C),n.appendChild(u)}for(allFieldset=a.querySelectorAll("fieldset"),i=0,len=allFieldset.length;i<len;i++)k.userParams.FormFieldset?allFieldset[i].classList.add(userPrefix+k.userParams.FormFieldset):allFieldset[i].classList.add(userPrefix+"-"+v.FormFieldset.classSetting);for(allLegend=a.querySelectorAll("legend"),i=0,len=allLegend.length;i<len;i++)k.userParams.FormFieldsetLegend?allLegend[i].classList.add(userPrefix+k.userParams.FormFieldsetLegend):allLegend[i].classList.add(userPrefix+"-"+v.LegendFieldset.classSetting);for(allRadio=a.querySelectorAll('input[type="radio"]'),i=0,len=allRadio.length;i<len;i++)k.userParams.FormRadio?allRadio[i].classList.add(userPrefix+k.userParams.FormRadio):allRadio[i].classList.add(userPrefix+"-"+v.FormRadio.classSetting);var h=document.querySelector("body"),b=h.firstChild;1!=k.userParams.Modal&&void 0!==k.userParams.Modal||h.insertBefore(a,b)}(),1==k.userParams.Modal||void 0===k.userParams.Modal){var t=document.createElement("button");t.setAttribute("id",userPrefix+"-"+v.ModalButton.id),t.setAttribute("data-accessconfig-button","true");var a=document.querySelector("[data-accessconfig-buttonname]");a=document.createTextNode(a.getAttribute("data-accessconfig-buttonname"));t.appendChild(a),document.getElementById(v.Setup.id).appendChild(t);var n=document.querySelectorAll('[data-accessconfig-button="true"]');for(i=0,len=n.length;i<len;i++)n[i].addEventListener("click",function(){o(this)},!1)}0!=k.userParams.Contrast&&(k.mode=userPrefix+"-"+v.ContrastFieldset.id,k.cookieName="contrast",r()),0!=k.userParams.Font&&(k.mode=userPrefix+"-"+v.DyslexiaFieldset.id,k.cookieName="font",r()),0!=k.userParams.LineSpacing&&(k.mode=userPrefix+"-"+v.LineSpacingFieldset.id,k.cookieName="line-spacing",r()),0!=k.userParams.Justification&&(k.mode=userPrefix+"-"+v.JustificationFieldset.id,k.cookieName="justification",r()),0!=k.userParams.ImageReplacement&&(k.mode=userPrefix+"-"+v.ImageReplacementFieldset.id,k.cookieName="image",function(){k.imgSpan=new Array;var e="."+userPrefix+"-"+v.ImageReplacementCSS.replacementCss;for(k.imgTab=document.querySelectorAll(e),j=0,len=k.imgTab.length;j<len;j++){var t=document.createElement("span"),a=k.imgTab[j].getAttribute("alt"),i=document.createTextNode(a);t.appendChild(i),t.classList.add(userPrefix+"-"+v.ImageReplacementCSS.replacementCss),t.classList.add(userPrefix+"-"+v.ImageReplacementCSS.replacementStyle),k.imgSpan[j]=t}}(),r())}else console.log("AccessConfig warning : HTML missing")}}(jQuery);[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})});
